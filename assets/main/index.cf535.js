window.__require=function e(t,o,n){function r(c,a){if(!o[c]){if(!t[c]){var s=c.split("/");if(s=s[s.length-1],!t[s]){var l="function"==typeof __require&&__require;if(!a&&l)return l(s,!0);if(i)return i(s,!0);throw new Error("Cannot find module '"+c+"'")}c=s}var p=o[c]={exports:{}};t[c][0].call(p.exports,function(e){return r(t[c][1][e]||e)},p,p.exports,e,t,o,n)}return o[c].exports}for(var i="function"==typeof __require&&__require,c=0;c<n.length;c++)r(n[c]);return r}({ActionController:[function(e,t,o){"use strict";cc._RF.push(t,"01b8aICfmlB5pFqJs1o/QYR","ActionController");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,c=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(e,t,o,n);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(c=(i<3?r(c):i>3?r(t,o,c):r(t,o))||c);return i>3&&c&&Object.defineProperty(t,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var c=e("../../GameManager"),a=e("../CubeView/CubeView"),s=e("./CubePool"),l=e("./GameSceneEvent"),p=e("./GameSceneModel"),u=e("./GameSceneViewModel"),d=cc._decorator,h=d.ccclass,f=d.property,m=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.scoreLabel=null,t.musicNodeScript=null,t.plateList=null,t.plateTypeList=null,t.plateIdList=null,t.tempDel=null,t}return r(t,e),t.prototype.onLoad=function(){this.musicNodeScript=cc.find("MusicNode").getComponent("MusicNode")},t.prototype.onEnable=function(){this.node.on("moveToBox",this.onMoveToBoxEvent,this)},t.prototype.onDisable=function(){this.node.off("moveToBox",this.onMoveToBoxEvent,this),this.clearPoolAndPlateList()},t.prototype.onMoveToBoxEvent=function(e){var t=this;if(this.checkPlateFull())c.GameManager.Debug("box full");else{var o=e.target.getComponent(a.default);o.removeTouchEndEvent(),p.gameSceneModel.moveToBox(o.cfid).then(function(e){c.GameManager.Debug("move--resolve"),o.onMoveToBox(),t.moveToPlate(o,e)},function(){c.GameManager.Debug("move--reject"),o.addTouchEndEvent()})}},t.prototype.clearPoolAndPlateList=function(){s.cubePool.clearPool(),this.plateList=null,this.plateTypeList=null,this.plateIdList=null,this.tempDel=null},t.prototype.checkPlateFull=function(){return p.gameSceneModel.box.length>=p.gameSceneModel.plateNum},t.prototype.clearPlateList=function(){this.plateList=[],this.plateTypeList=[],this.plateIdList=[],this.tempDel=[]},Object.defineProperty(t.prototype,"plateListLenth",{get:function(){return null==this.plateList?0:this.plateList.length},enumerable:!1,configurable:!0}),t.prototype.moveToRightTween=function(e,t,o){cc.Tween.stopAllByTarget(e.node);var n=u.gameSceneViewModel.plateStartPos.y;cc.tween().target(e.node).to(o,{x:u.gameSceneViewModel.plateStartPos.x+t*u.gameSceneViewModel.cubeWidth,y:n}).start()},t.prototype.removeTween=function(e){null!=e&&cc.tween().target(e.node).delay(.1).to(.2,{scale:0}).call(function(){s.cubePool.onKilled(e.node)}).start()},t.prototype.move_Tween=function(e,t,o){cc.Tween.stopAllByTarget(e.node),cc.tween().target(e.node).to(o,{position:t}).start()},t.prototype.moveToPlate=function(e,t){var o=this;t==p.CallbackType.ShowNew&&this.node.dispatchEvent(new l.GameSceneEvent("showNew",!0));var n=this.plateListLenth,r=u.gameSceneViewModel.plateStartPos.clone(),i=0;0!=n&&((i=this.plateTypeList.lastIndexOf(e.imgType))>-1&&n>i+1?(r.x+=(i+1)*u.gameSceneViewModel.cubeWidth,i++):(i=n,r.x+=n*u.gameSceneViewModel.cubeWidth));var a=p.gameSceneModel.del.slice();new Promise(function(t){null==o.plateList&&(o.plateList=[],o.plateTypeList=[],o.plateIdList=[]),null==o.tempDel&&(o.tempDel=[]),o.plateList.splice(i,0,e),o.plateTypeList.splice(i,0,e.imgType),o.plateIdList.splice(i,0,e.cfid);for(var n=i+1;n<o.plateList.length;n++)o.moveToRightTween(o.plateList[n],n,.2);for(var s=0;s<a.length;s++){n=o.plateIdList.indexOf(a[s]);var l=o.plateList[n];o.plateList.splice(n,1),o.plateTypeList.splice(n,1),o.plateIdList.splice(n,1),o.tempDel.push(l)}cc.Tween.stopAllByTarget(e.node),cc.tween().target(e.node).to(.3,{position:r}).call(function(){c.GameManager.Debug("move2"),t(null)}).start(),c.GameManager.Debug("move1")}).then(function(){switch(c.GameManager.Debug("move3--"+t),t){case p.CallbackType.ReLoad:o.node.dispatchEvent(new l.GameSceneEvent("sheepHpUpdate",!0)),o.node.dispatchEvent(new l.GameSceneEvent("reload",!0));break;case p.CallbackType.Fail:o.node.dispatchEvent(new l.GameSceneEvent("fail",!0));break;case p.CallbackType.FinishAll:o.node.dispatchEvent(new l.GameSceneEvent("finishAll",!0))}o.checkXiaoChu()})},t.prototype.checkXiaoChu=function(){if(null!=this.tempDel&&this.tempDel.length>0){this.musicNodeScript.playOnXiaoChu();for(var e=this.tempDel.length-1;e>=0;e--){var t=this.tempDel[e];this.tempDel.splice(e,1),this.removeTween(t)}this.node.dispatchEvent(new l.GameSceneEvent("sheepHpUpdate",!0)),this.moveOther()}},t.prototype.moveOther=function(){for(var e=0;e<this.plateList.length;e++){var t=this.plateList[e],o=u.gameSceneViewModel.plateStartPos.x+e*u.gameSceneViewModel.cubeWidth,n=u.gameSceneViewModel.plateStartPos.y;t.node.x!=o&&(cc.Tween.stopAllByTarget(t.node),cc.tween().target(t.node).delay(.3).to(.1,{x:o,y:n}).start())}},t.prototype.move_AbovePlate=function(e){if(null!=this.plateList&&0!=this.plateList.length){for(var t=this.plateList.length-1;t>=0;t--){var o=this.plateList[t];if(e.indexOf(o.cfid)>-1){var n=p.gameSceneModel.structDic[o.cfid],r=n.x,i=n.y,c=n.z,a=n.picture,s=n.direct;o.initData(o.cfid,r,i,c,a,s),o.moveToPlate2();var l=-7*u.gameSceneViewModel.blockWidth,d=new cc.Vec3(l+r*u.gameSceneViewModel.blockWidth,u.gameSceneViewModel.plateStartPos.y+o.node.height+20);this.move_Tween(o,d,.1),this.plateList.splice(t,1),this.plateTypeList.splice(t,1),this.plateIdList.splice(t,1)}}for(t=0;t<this.plateList.length;t++){var h=this.plateList[t],f=u.gameSceneViewModel.plateStartPos.x+t*u.gameSceneViewModel.cubeWidth;i=u.gameSceneViewModel.plateStartPos.y,h.node.x!=f&&(cc.Tween.stopAllByTarget(h.node),cc.tween().target(h.node).to(.2,{x:f,y:i}).start())}}},t.prototype.move_Revert=function(e){if(null!=this.plateList&&0!=this.plateList.length){for(var t=this.plateList.length-1;t>=0;t--){var o=this.plateList[t];if(e.indexOf(o.cfid)>-1){var n=p.gameSceneModel.structDic[o.cfid],r=n.x,i=n.y,c=n.z,a=n.direct,s=n.picture;o.initData(o.cfid,r,i,c,s,a),o.moveToPlate2();var l=void 0;if(-100==i){var d=-7*u.gameSceneViewModel.blockWidth;l=new cc.Vec3(d+r*u.gameSceneViewModel.blockWidth,u.gameSceneViewModel.plateStartPos.y+o.node.height+20)}else l=u.gameSceneViewModel.getCubePos(r,i,c,a);this.move_Tween(o,l,.3),this.plateList.splice(t,1),this.plateTypeList.splice(t,1),this.plateIdList.splice(t,1)}}this.moveOther()}},i([f(cc.Node)],t.prototype,"scoreLabel",void 0),i([h],t)}(cc.Component);o.default=m,cc._RF.pop()},{"../../GameManager":"GameManager","../CubeView/CubeView":"CubeView","./CubePool":"CubePool","./GameSceneEvent":"GameSceneEvent","./GameSceneModel":"GameSceneModel","./GameSceneViewModel":"GameSceneViewModel"}],ChangeSpriteGray:[function(e,t,o){"use strict";cc._RF.push(t,"80407Kp+4VOZZD2/3Uc0Y1s","ChangeSpriteGray");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,c=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(e,t,o,n);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(c=(i<3?r(c):i>3?r(t,o,c):r(t,o))||c);return i>3&&c&&Object.defineProperty(t,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var c=cc._decorator,a=c.ccclass,s=c.property,l=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.sprite=null,t.normal=null,t.gray=null,t}return r(t,e),t.prototype.ChangeToGray=function(){null!=this.sprite&&this.sprite.setMaterial(0,this.gray)},t.prototype.ChangeToNormal=function(){null!=this.sprite&&this.sprite.setMaterial(0,this.normal)},i([s(cc.Sprite)],t.prototype,"sprite",void 0),i([s(cc.Material)],t.prototype,"normal",void 0),i([s(cc.Material)],t.prototype,"gray",void 0),i([a],t)}(cc.Component);o.default=l,cc._RF.pop()},{}],ClickPlayAudio:[function(e,t,o){"use strict";cc._RF.push(t,"1b5f9/zdVxPeKWCRbdEFSGE","ClickPlayAudio");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,c=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(e,t,o,n);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(c=(i<3?r(c):i>3?r(t,o,c):r(t,o))||c);return i>3&&c&&Object.defineProperty(t,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var c=cc._decorator,a=c.ccclass,s=(c.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.musicNodeScript=null,t}return r(t,e),t.prototype.onLoad=function(){this.musicNodeScript=cc.find("MusicNode").getComponent("MusicNode")},t.prototype.start=function(){},t.prototype.onEnable=function(){this.node.on("touchend",this.on_touch_ended,this)},t.prototype.onDisable=function(){this.node.off("touchend",this.on_touch_ended,this)},t.prototype.on_touch_ended=function(){this.musicNodeScript.playOnClick()},i([a],t)}(cc.Component));o.default=s,cc._RF.pop()},{}],CubePool:[function(e,t,o){"use strict";cc._RF.push(t,"d545dMIKnNCRJTb3fWVh/3V","CubePool"),Object.defineProperty(o,"__esModule",{value:!0}),o.cubePool=o.CubePool=void 0;var n=function(){function e(){this.CubePool=null,this.PrefabCube=null}return e.prototype.initCubePool=function(e){if(null==this.CubePool){this.CubePool=new cc.NodePool,this.PrefabCube=e;for(var t=0;t<100;++t){var o=cc.instantiate(this.PrefabCube);this.CubePool.put(o)}}},e.prototype.createCube=function(){var e=null;return(e=this.CubePool.size()>0?this.CubePool.get():cc.instantiate(this.PrefabCube)).scale=1,e},e.prototype.onKilled=function(e){cc.Tween.stopAllByTarget(e),e.scale=1,this.CubePool.put(e)},e.prototype.clearPool=function(){null!=this.CubePool&&this.CubePool.clear()},e}();o.CubePool=n,o.cubePool=new n,cc._RF.pop()},{}],CubeView:[function(e,t,o){"use strict";cc._RF.push(t,"2b62fEJn1lOrLJsX7jqv4e6","CubeView");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,c=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(e,t,o,n);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(c=(i<3?r(c):i>3?r(t,o,c):r(t,o))||c);return i>3&&c&&Object.defineProperty(t,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var c=e("../../GameManager"),a=e("../GameScene/GameSceneEvent"),s=e("../GameScene/GameSceneModel"),l=e("./MoveRound"),p=cc._decorator,u=p.ccclass,d=p.property,h=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.cubeBg=null,t.itemBgNode=null,t.huisebg=null,t.moveRound=null,t.buttonComp=null,t._cfid=0,t._posZ=0,t._posX=0,t._posY=0,t._imgType=-999,t._direct=0,t}return r(t,e),Object.defineProperty(t.prototype,"cfid",{get:function(){return this._cfid},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"imgType",{get:function(){return this._imgType},enumerable:!1,configurable:!0}),t.prototype.initData=function(e,t,o,n,r,i){this.coverCount=0,this.node.zIndex=n,this._cfid=e,this._posX=t,this._posY=o,this._posZ=n,this._direct=i,this.itembg1=this.itemBgNode.getChildByName("itembg1"),this.changeImg(r)},t.prototype.onLoad=function(){this.collider=this.node.getComponent(cc.BoxCollider)},t.prototype.onEnable=function(){this.setMaskEnable(!1),this.collider.enabled=!0,this.addTouchEndEvent()},t.prototype.onDisable=function(){this.removeTouchEndEvent()},t.prototype.changeImg=function(e){var t=this;this._imgType=e,cc.resources.load("Texture/cubeImg/"+e,cc.SpriteFrame,function(e,o){t.itembg1.getComponent(cc.Sprite).spriteFrame=o})},t.prototype.start=function(){},t.prototype.setMaskEnable=function(e){this.moveRound.shuffling||(this.huisebg.active=e,this.buttonComp.interactable=!e,0!=this._direct?this.itembg1.active=!e:this.itembg1.active=!0)},t.prototype.onCollisionEnter=function(e){e.getComponent("CubeView")._posZ>this._posZ&&(this.coverCount++,this.setMaskEnable(this.coverCount>0))},t.prototype.onCollisionExit=function(e){e.getComponent("CubeView")._posZ>this._posZ&&(this.coverCount--,this.setMaskEnable(this.coverCount>0),this.coverCount<=0&&(this.coverCount=0))},t.prototype.addTouchEndEvent=function(){this.node.on("touchend",this.on_touch_ended,this)},t.prototype.removeTouchEndEvent=function(){this.node.off("touchend",this.on_touch_ended,this)},t.prototype.on_touch_ended=function(){c.GameManager.Debug("on_touch_ended--"+this._cfid+"||"+this._posZ+"||"+this._posX+"||"+this._posY),this.huisebg.active||s.gameSceneModel.isWaitingMove||this.node.dispatchEvent(new a.GameSceneEvent("moveToBox",!0))},t.prototype.onMoveToBox=function(){this.setMaskEnable(!1),this.collider.enabled=!1,this.node.zIndex=999},t.prototype.moveToPlate2=function(){this.addTouchEndEvent(),this.collider.enabled=!0,this.node.zIndex=this._posZ},i([d(cc.Sprite)],t.prototype,"cubeBg",void 0),i([d(cc.Node)],t.prototype,"itemBgNode",void 0),i([d(cc.Node)],t.prototype,"huisebg",void 0),i([d(l.default)],t.prototype,"moveRound",void 0),i([d(cc.Button)],t.prototype,"buttonComp",void 0),i([u],t)}(cc.Component);o.default=h,cc._RF.pop()},{"../../GameManager":"GameManager","../GameScene/GameSceneEvent":"GameSceneEvent","../GameScene/GameSceneModel":"GameSceneModel","./MoveRound":"MoveRound"}],FailedWindow:[function(e,t,o){"use strict";cc._RF.push(t,"7fd2ari/OVBWoJbD9Vg0x3z","FailedWindow");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,c=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(e,t,o,n);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(c=(i<3?r(c):i>3?r(t,o,c):r(t,o))||c);return i>3&&c&&Object.defineProperty(t,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var c=e("../GameScene/GameSceneEvent"),a=e("../GameScene/GameSceneModel"),s=cc._decorator,l=s.ccclass,p=s.property,u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.scaleNode=null,t.infoPart=null,t.revivePart=null,t.musicNodeScript=null,t.hasClickQuit=!1,t.ReviveType=a.ItemType.move,t.hasClickRetry=!1,t}return r(t,e),t.prototype.onLoad=function(){this.musicNodeScript=cc.find("MusicNode").getComponent("MusicNode")},t.prototype.start=function(){this.hasClickRetry=!1,this.CheckShowRevivePart(),cc.tween(this.scaleNode).to(.25,{scaleX:1,scaleY:1}).start()},t.prototype.on_touch_ended=function(e){switch(this.musicNodeScript.playOnClick(),e.currentTarget._name){case"retryBtn":this.Retry();break;case"backtomenuBtn":this.BackToMenu();break;case"reviveBtn":this.Revive();break;case"giveupBtn":case"closeBtn":this.GiveUp()}},t.prototype.CheckShowRevivePart=function(){var e=a.gameSceneModel.getItemTimes(this.ReviveType)>0;a.gameSceneModel.getCanUseItemTimes(this.ReviveType)>0&&e||(this.revivePart.scale=0)},t.prototype.Revive=function(){var e=a.gameSceneModel.getItemTimes(this.ReviveType)>0;a.gameSceneModel.getCanUseItemTimes(this.ReviveType)>0&&e?(this.closeTween(),this.node.dispatchEvent(new c.GameSceneEvent("revive",!0))):this.revivePart.scale=0},t.prototype.GiveUp=function(){var e=this;a.gameSceneModel.quitGame().then(function(){e.hasClickQuit=!0}),cc.tween(this.revivePart).to(.25,{scaleX:0,scaleY:0}).start()},t.prototype.Retry=function(){var e=this;this.hasClickRetry||(this.hasClickRetry=!0,this.hasClickQuit?a.gameSceneModel.startGame().then(function(){e.closeTween(),e.node.dispatchEvent(new c.GameSceneEvent("reload",!0))}):a.gameSceneModel.quitGame().then(function(){return a.gameSceneModel.startGame().then(function(){e.closeTween(),e.node.dispatchEvent(new c.GameSceneEvent("reload",!0))})}))},t.prototype.BackToMenu=function(){var e=this;this.hasClickQuit||a.gameSceneModel.quitGame(),cc.tween(this.scaleNode).to(.25,{scaleX:0,scaleY:0}).call(function(){e.node.destroy(),e.node.dispatchEvent(new c.GameSceneEvent("backToMenu",!0))}).start()},t.prototype.closeTween=function(){var e=this;cc.tween(this.scaleNode).to(.25,{scaleX:0,scaleY:0}).call(function(){e.node.destroy()}).start()},i([p(cc.Node)],t.prototype,"scaleNode",void 0),i([p(cc.Node)],t.prototype,"infoPart",void 0),i([p(cc.Node)],t.prototype,"revivePart",void 0),i([l],t)}(cc.Component);o.default=u,cc._RF.pop()},{"../GameScene/GameSceneEvent":"GameSceneEvent","../GameScene/GameSceneModel":"GameSceneModel"}],FinishWindow:[function(e,t,o){"use strict";cc._RF.push(t,"001126wOfRLzpDUn1Tr6vz6","FinishWindow");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,c=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(e,t,o,n);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(c=(i<3?r(c):i>3?r(t,o,c):r(t,o))||c);return i>3&&c&&Object.defineProperty(t,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var c=e("../GameScene/GameSceneEvent"),a=e("../GameScene/GameSceneModel"),s=cc._decorator,l=s.ccclass,p=s.property,u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.scaleNode=null,t.infoPart=null,t.musicNodeScript=null,t}return r(t,e),t.prototype.onLoad=function(){this.musicNodeScript=cc.find("MusicNode").getComponent("MusicNode")},t.prototype.start=function(){a.gameSceneModel.quitGame(),cc.tween(this.scaleNode).to(.25,{scaleX:1,scaleY:1}).start()},t.prototype.on_touch_ended=function(e){switch(this.musicNodeScript.playOnClick(),e.currentTarget._name){case"backtomenuBtn":this.BackToMenu()}},t.prototype.BackToMenu=function(){var e=this;cc.tween(this.scaleNode).to(.25,{scaleX:0,scaleY:0}).call(function(){e.node.destroy(),e.node.dispatchEvent(new c.GameSceneEvent("backToMenu",!0))}).start()},i([p(cc.Node)],t.prototype,"scaleNode",void 0),i([p(cc.Node)],t.prototype,"infoPart",void 0),i([l],t)}(cc.Component);o.default=u,cc._RF.pop()},{"../GameScene/GameSceneEvent":"GameSceneEvent","../GameScene/GameSceneModel":"GameSceneModel"}],GameManager:[function(e,t,o){"use strict";cc._RF.push(t,"ac91e5yfrlFvoJJh1u6b9k8","GameManager"),Object.defineProperty(o,"__esModule",{value:!0}),o.GameManager=void 0;var n=e("./tool/GetHttp"),r=function(){function e(){}return e.Debug=function(t){e.logEnable&&console.log(t)},e.SetLocalData=function(e,t){cc.sys.localStorage.setItem(n.default.userCode+"-"+e,t)},e.GetLocalData=function(e){return cc.sys.localStorage.getItem(n.default.userCode+"-"+e)},e.logEnable=!1,e.helpUrl="",e.discordUrl="",e.twitterUrl="",e.teamUrl="",e.getItemUrl="",e.sheepChargeUrl="",e.itemChargeUrl="",e}();o.GameManager=r,cc._RF.pop()},{"./tool/GetHttp":"GetHttp"}],GameSceneEvent:[function(e,t,o){"use strict";cc._RF.push(t,"48c4aeOcylO0Y2kjENuJNFt","GameSceneEvent");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)});Object.defineProperty(o,"__esModule",{value:!0}),o.GameSceneEvent=void 0;var i=function(e){function t(t,o,n){var r=e.call(this,t,o)||this;return r.detail=null,r.detail=n,r}return r(t,e),t}(cc.Event);o.GameSceneEvent=i,cc._RF.pop()},{}],GameSceneModel:[function(e,t,o){"use strict";cc._RF.push(t,"11c35RfVA5KAb1iC5vvezKK","GameSceneModel"),Object.defineProperty(o,"__esModule",{value:!0}),o.gameSceneModel=o.CallbackType=o.GameSceneModel=o.ItemType=void 0;var n,r=e("../../GameManager"),i=e("../../tool/GetHttp"),c=e("../../tool/HttpAgreement");(function(e){e.back="back",e.move="move",e.shuffle="shuffle"})(n=o.ItemType||(o.ItemType={}));var a,s=function(){function e(){this.plateNum=7,this.maxLv=2,this.useItemTimes=3,this.structDic=null,this.box=null,this.del=[],this.newStructArr=[],this.selectSheep=0,this.UsedItemRecord=null,this.isWaitingMove=!1,this.movePokerArr=[],this.revertPokerArr=[]}return e.prototype.getItemTimes=function(){return 1},e.prototype.getCanUseItemTimes=function(e){return null!=this.UsedItemRecord&&this.UsedItemRecord.hasOwnProperty(e.toString())?this.useItemTimes-this.UsedItemRecord[e.toString()]:this.useItemTimes},e.prototype.AddUseItemRecord=function(e,t){void 0===t&&(t=1),null==this.UsedItemRecord&&(this.UsedItemRecord={}),this.UsedItemRecord.hasOwnProperty(e.toString())||(this.UsedItemRecord[e.toString()]=0),this.UsedItemRecord[e.toString()]+=t},e.prototype.UseItemUppdateData=function(){},e.prototype.getUserInfo=function(){return i.default.getHttp(c.default.getUserInfo).then(function(e){return r.GameManager.Debug(e),0==JSON.parse(e).s?Promise.resolve():(r.GameManager.Debug("request error"),Promise.reject())}).catch(function(e){r.GameManager.Debug("request error"),r.GameManager.Debug(e)})},e.prototype.getStruct=function(){var e=this;return i.default.getHttp(c.default.getStruct).then(function(t){return r.GameManager.Debug(t),e.parseData_getStruct(t,e)}).catch(function(e){r.GameManager.Debug("request error"),r.GameManager.Debug(e)})},e.prototype.parseData_getStruct=function(e,t){return new Promise(function(o){var n=JSON.parse(e);t.lvl=n.lvl,t.structDic={},n.grid.forEach(function(e){t.structDic.hasOwnProperty(e.id)||(t.structDic[e.id]=e)}),t.box=n.box,t.isWaitingMove=!1,o(null)})},e.prototype.startGame=function(){var e=this;return i.default.getHttp(c.default.startGame,{sheepId:this.selectSheep}).then(function(t){r.GameManager.Debug(t);var o=JSON.parse(t);return e.UsedItemRecord={},0==o.s?Promise.resolve():Promise.reject()})},e.prototype.quitGame=function(){var e=this;return i.default.getHttp(c.default.quitGame,{sheepId:this.selectSheep}).then(function(t){return r.GameManager.Debug(t),e.getUserInfo()})},e.prototype.moveToBox=function(e){var t=this;return this.isWaitingMove=!0,i.default.getHttp(c.default.moveToBox,{pokerId:e,sheepId:this.selectSheep}).then(function(e){return t.isWaitingMove=!1,r.GameManager.Debug(e),t.parseData_moveToBox(e,t)})},e.prototype.parseData_moveToBox=function(e,t){return new Promise(function(o,n){var i=JSON.parse(e);0==i.s?(t.newStructArr=[],t.box=i.box,t.del=i.del,t.lvl!=i.lvl?(t.UsedItemRecord={},i.lvl>=t.maxLv?o(a.FinishAll):o(a.ReLoad)):t.box.length>=7?o(a.Fail):(i.grid.forEach(function(e){t.structDic.hasOwnProperty(e.id)||(t.structDic[e.id]=e,t.newStructArr.push(e.id))}),t.newStructArr.length>0?(r.GameManager.Debug(t.newStructArr),o(a.ShowNew)):o(a.Move))):(r.GameManager.Debug("request error"),n(null))})},e.prototype.shuffle=function(){var e=this;return i.default.getHttp(c.default.shuffle).then(function(t){return r.GameManager.Debug(t),0==JSON.parse(t).s?(e.UseItemUppdateData(n.shuffle),e.AddUseItemRecord(n.shuffle),Promise.resolve()):Promise.reject()}).catch(function(e){r.GameManager.Debug("request error"),r.GameManager.Debug(e)})},e.prototype.movePoker=function(){var e=this;return i.default.getHttp(c.default.movePoker).then(function(t){r.GameManager.Debug(t);var o=JSON.parse(t);return e.movePokerArr=[],0==o.s?(e.UseItemUppdateData(n.move),e.AddUseItemRecord(n.move),o.moveBoxPokers.forEach(function(t){e.structDic[t.id]=t,e.movePokerArr.push(t.id);var o=e.box.indexOf(t.id);o>-1&&e.box.splice(o,1)}),Promise.resolve()):Promise.reject()}).catch(function(e){r.GameManager.Debug("request error"),r.GameManager.Debug(e)})},e.prototype.revert=function(){var e=this;return i.default.getHttp(c.default.revert).then(function(t){r.GameManager.Debug(t);var o=JSON.parse(t);if(e.revertPokerArr=[],0==o.s){if(e.UseItemUppdateData(n.back),e.AddUseItemRecord(n.back),null!=o.revertPorker&&o.revertPorker.hasOwnProperty("id")){e.structDic[o.revertPorker.id]=o.revertPorker,e.revertPokerArr.push(o.revertPorker.id);var i=e.box.indexOf(o.revertPorker.id);i>-1&&e.box.splice(i,1)}return Promise.resolve()}return Promise.reject()}).catch(function(e){r.GameManager.Debug("request error"),r.GameManager.Debug(e)})},e}();o.GameSceneModel=s,function(e){e[e.Move=0]="Move",e[e.ShowNew=1]="ShowNew",e[e.Fail=2]="Fail",e[e.ReLoad=3]="ReLoad",e[e.FinishAll=4]="FinishAll"}(a=o.CallbackType||(o.CallbackType={})),o.gameSceneModel=new s,cc._RF.pop()},{"../../GameManager":"GameManager","../../tool/GetHttp":"GetHttp","../../tool/HttpAgreement":"HttpAgreement"}],GameSceneViewModel:[function(e,t,o){"use strict";cc._RF.push(t,"cc1aa7JLctCP5h46twGD5b+","GameSceneViewModel"),Object.defineProperty(o,"__esModule",{value:!0}),o.gameSceneViewModel=o.GameSceneViewModel=void 0;var n=function(){function e(){this._cubeWidth=0,this._cubeHeight=0,this._blockWidth=0,this._blockHeight=0,this.directOffset=20}return Object.defineProperty(e.prototype,"cubeWidth",{get:function(){return this._cubeWidth},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"cubeHeight",{get:function(){return this._cubeHeight},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"blockWidth",{get:function(){return this._blockWidth},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"blockHeight",{get:function(){return this._blockHeight},enumerable:!1,configurable:!0}),e.prototype.setCubeSize=function(e,t){this._cubeWidth=e,this._cubeHeight=t,this._blockWidth=e/2,this._blockHeight=t/2},e.prototype.SetPlateStartPos=function(e){this._plateStartPos=new cc.Vec3(e.x+o.gameSceneViewModel.blockWidth,e.y,e.z)},Object.defineProperty(e.prototype,"plateStartPos",{get:function(){return this._plateStartPos},enumerable:!1,configurable:!0}),e.prototype.getCubePos=function(e,t,n,r){var i=-7*o.gameSceneViewModel.blockWidth,c=-150-o.gameSceneViewModel.cubeHeight;switch(r){case 0:return new cc.Vec3(i+e*o.gameSceneViewModel.blockWidth,c+t*this.blockHeight);case 1:return new cc.Vec3(i+e*o.gameSceneViewModel.blockWidth,0+c+t*this.blockHeight+(Math.abs(n)-1)*this.directOffset);case 2:return new cc.Vec3(i+e*o.gameSceneViewModel.blockWidth,0+c+t*this.blockHeight-(Math.abs(n)-1)*this.directOffset);case 3:return new cc.Vec3(i+e*o.gameSceneViewModel.blockWidth-(Math.abs(n)-1)*this.directOffset,0+c+t*this.blockHeight);case 4:return new cc.Vec3(i+e*o.gameSceneViewModel.blockWidth+(Math.abs(n)-1)*this.directOffset,0+c+t*this.blockHeight);default:return new cc.Vec3(999999,999999)}},e}();o.GameSceneViewModel=n,o.gameSceneViewModel=new n,cc._RF.pop()},{}],GameScene:[function(e,t,o){"use strict";cc._RF.push(t,"3a0deW78R9HuJGAv3zClbm9","GameScene");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,c=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(e,t,o,n);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(c=(i<3?r(c):i>3?r(t,o,c):r(t,o))||c);return i>3&&c&&Object.defineProperty(t,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var c=e("../../GameManager"),a=e("../../tool/GetHttp"),s=e("../../tool/HttpAgreement"),l=e("../CubeView/ChangeSpriteGray"),p=e("../CubeView/CubeView"),u=e("../StingWindow/SetingWindow"),d=e("./ActionController"),h=e("./CubePool"),f=e("./GameSceneModel"),m=e("./GameSceneViewModel"),y=e("./ToastScrpit"),g=cc._decorator,v=g.ccclass,b=g.property,S=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.plate=null,t.cubeParent=null,t.actionController=null,t.btn1=null,t.btn2=null,t.btn3=null,t.toast=null,t.GuoGai=null,t}return r(t,e),t.prototype.onLoad=function(){cc.director.getCollisionManager().enabled=!0},t.prototype.start=function(){var e=this;this.updateItemNum(),this.GuoGai.active=!0,f.gameSceneModel.getStruct().then(function(){return e.loadPrefab(e)}).then(function(){var t=e.plate.getChildByName("startPoint").convertToWorldSpaceAR(cc.Vec3.ZERO),o=e.node.convertToNodeSpaceAR(t);return m.gameSceneViewModel.SetPlateStartPos(o),e.createrCube(e)})},t.prototype.onEnable=function(){this.node.on("reload",this.onReloadEvent,this),this.node.on("fail",this.onFailEvent,this),this.node.on("showNew",this.onShowNewEvent,this),this.node.on("backToMenu",this.onBackToMenuEvent,this),this.node.on("revive",this.onReviveEvent,this),this.node.on("useItem",this.onclickButtomTips,this),this.node.on("sheepHpUpdate",this.onSheepHpUpdate,this),this.node.on("updateSelectSheep",this.onSheepHpUpdate,this),this.node.on("updateItems",this.onSheepHpUpdate,this),this.node.on("finishAll",this.onFinishAllEvent,this),this.node.on("startGame",this.onFinishAllEvent,this)},t.prototype.onDisable=function(){this.node.off("reload",this.onReloadEvent,this),this.node.off("fail",this.onFailEvent,this),this.node.off("showNew",this.onShowNewEvent,this),this.node.off("backToMenu",this.onBackToMenuEvent,this),this.node.off("revive",this.onReviveEvent,this),this.node.off("useItem",this.onclickButtomTips,this),this.node.off("sheepHpUpdate",this.onSheepHpUpdate,this),this.node.off("updateSelectSheep",this.onSheepHpUpdate,this),this.node.off("updateItems",this.onSheepHpUpdate,this)},t.prototype.onSheepHpUpdate=function(){},t.prototype.onclickButtomTips=function(e){switch(e.detail){case 1:this.onClickButton1();break;case 2:this.onClickButton2();break;case 3:this.onClickButton3()}},t.prototype.onReloadEvent=function(){var e=this;c.GameManager.Debug("reload"),this.reclyeCube(this).then(function(){return e.onSheepHpUpdate(null),e.reload()})},t.prototype.onFailEvent=function(){c.GameManager.Debug("fail"),this.openFailedWindow()},t.prototype.onFinishAllEvent=function(){c.GameManager.Debug("FinishAll"),this.GuoGai.active=!1,this.openFinishAllWindow()},t.prototype.onShowNewEvent=function(){c.GameManager.Debug("showNew"),this.createrNewCube(this)},t.prototype.onBackToMenuEvent=function(){c.GameManager.Debug("backToMenu"),this.reclyeCube(this).then(function(){cc.director.loadScene("MenuScene")})},t.prototype.onReviveEvent=function(){c.GameManager.Debug("Revive"),this.movePoker()},t.prototype.onClickTipsWindow=function(e){switch(e.currentTarget._name){case"button1":this.openUseItemsWindowTips(f.ItemType.move);break;case"button2":this.openUseItemsWindowTips(f.ItemType.back);break;case"button3":this.openUseItemsWindowTips(f.ItemType.shuffle)}},t.prototype.onClickButton1=function(){this.movePoker()},t.prototype.onClickButton2=function(){this.revert()},t.prototype.onClickButton3=function(){var e=this;f.gameSceneModel.shuffle().then(function(){return f.gameSceneModel.getStruct()}).then(function(){e.shuffle()})},t.prototype.reload=function(){var e=this;return f.gameSceneModel.getStruct().then(function(){var t=e.plate.getChildByName("startPoint").convertToWorldSpaceAR(cc.Vec3.ZERO),o=e.node.convertToNodeSpaceAR(t);return m.gameSceneViewModel.SetPlateStartPos(o),e.createrCube(e)})},t.prototype.loadPrefab=function(){return new Promise(function(e,t){cc.resources.load("prefab/Cube",function(o,n){return o?(cc.log("Prefab error:"+o),void t()):n instanceof cc.Prefab?(h.cubePool.initCubePool(n),m.gameSceneViewModel.setCubeSize(n.data.width,n.data.height),void e(null)):(cc.log("Prefab error"),void t())})})},t.prototype.createSingle=function(e){var t=e.id,o=e.x,n=e.y,r=e.z,i=e.picture,c=e.direct,a=h.cubePool.createCube();a.getComponent("CubeView").initData(t,o,n,r,i,c),this.cubeParent.addChild(a),a.setPosition(m.gameSceneViewModel.getCubePos(o,n,r,c))},t.prototype.createrCube=function(e){return new Promise(function(t){for(var o in f.gameSceneModel.structDic)Object.prototype.hasOwnProperty.call(f.gameSceneModel.structDic,o)&&e.createSingle(f.gameSceneModel.structDic[o]);t(null)})},t.prototype.createrNewCube=function(e){return new Promise(function(t){f.gameSceneModel.newStructArr.forEach(function(t){e.createSingle(f.gameSceneModel.structDic[t])}),t(null)})},t.prototype.reclyeCube=function(e){return cc.Tween.stopAllByTarget(this.node),e.actionController.clearPlateList(),e.cubeParent.childrenCount>0?(c.GameManager.Debug("r-num--"+e.cubeParent.childrenCount),new Promise(function(t){for(var o=e.cubeParent.childrenCount-1;o>=0;o--)h.cubePool.onKilled(e.cubeParent.children[o]);t(null)})):Promise.resolve()},t.prototype.shuffle=function(){this.updateItemNum();for(var e=0;e<this.cubeParent.childrenCount;e++){var t=this.cubeParent.children[e].getComponent(p.default);f.gameSceneModel.structDic.hasOwnProperty(t.cfid)&&-100!=f.gameSceneModel.structDic[t.cfid].y&&(t.changeImg(f.gameSceneModel.structDic[t.cfid].picture),t.moveRound.shuffle())}},t.prototype.movePoker=function(){var e=this;f.gameSceneModel.box.length<=0||f.gameSceneModel.movePoker().then(function(){e.updateItemNum(),e.actionController.move_AbovePlate(f.gameSceneModel.movePokerArr)})},t.prototype.revert=function(){var e=this;a.default.checkLastRequestType(s.default.moveToBox)&&0==f.gameSceneModel.del.length&&f.gameSceneModel.revert().then(function(){e.actionController.move_Revert(f.gameSceneModel.revertPokerArr),e.updateItemNum()})},t.prototype.on_touch_ended=function(e){switch(e.currentTarget._name){case"sheZhiButton":this.openSetingWindow()}},t.prototype.openSetingWindow=function(){var e=this;return new Promise(function(t,o){cc.resources.load("prefab/SetingWindow",function(n,r){if(n)return cc.log("Prefab error:"+n),void o();if(!(r instanceof cc.Prefab))return cc.log("Prefab error"),void o();var i=cc.instantiate(r);i.getComponent(u.default).showGiveUp(),e.node.addChild(i),i.setPosition(0,0),t(null)})})},t.prototype.openUseItemsWindowTips=function(e){var t=f.gameSceneModel.getItemTimes(e)>0,o=f.gameSceneModel.getCanUseItemTimes(e)>0;if(t&&!o)return this.showToast("Only allow to use 3 times per round."),Promise.resolve();var n=this;return new Promise(function(o,r){var i;i=t?"UseItemWindowTip":"UseItemWindow",cc.resources.load("prefab/"+i,function(t,i){if(t)return cc.log("Prefab error:"+t),void r();if(!(i instanceof cc.Prefab))return cc.log("Prefab error"),void r();var c=cc.instantiate(i);n.node.addChild(c),c.emit("UseItemTips",e),c.setPosition(0,0),o(null)})})},t.prototype.openFailedWindow=function(){var e=this;return new Promise(function(t,o){cc.resources.load("prefab/FailedWindow",function(n,r){if(n)return cc.log("Prefab error:"+n),void o();if(!(r instanceof cc.Prefab))return cc.log("Prefab error"),void o();var i=cc.instantiate(r);e.node.addChild(i),i.setPosition(0,0),t(null)})})},t.prototype.openFinishAllWindow=function(){var e=this;return new Promise(function(t,o){cc.resources.load("prefab/FinishWindow",function(n,r){if(n)return cc.log("Prefab error:"+n),void o();if(!(r instanceof cc.Prefab))return cc.log("Prefab error"),void o();var i=cc.instantiate(r);e.node.addChild(i),i.setPosition(0,0),t(null)})})},t.prototype.updateItemNum=function(){this.setItemBtnInfo(this.btn1,f.ItemType.move),this.setItemBtnInfo(this.btn2,f.ItemType.back),this.setItemBtnInfo(this.btn3,f.ItemType.shuffle)},t.prototype.setItemBtnInfo=function(e,t){e.getComponentInChildren(cc.Label).string=f.gameSceneModel.getItemTimes(t).toString(),this.getItemBtnState(t)?(e.getComponent(cc.Sprite).getComponent(l.default).ChangeToNormal(),e.getChildByName("icon").getComponent(l.default).ChangeToNormal()):(e.getComponent(cc.Sprite).getComponent(l.default).ChangeToGray(),e.getChildByName("icon").getComponent(l.default).ChangeToGray())},t.prototype.getItemBtnState=function(e){return this.checkItemTimes(e)&&this.checkCanUseItemTime(e)},t.prototype.checkItemTimes=function(e){return f.gameSceneModel.getItemTimes(e)>0},t.prototype.checkCanUseItemTime=function(e){return f.gameSceneModel.getCanUseItemTimes(e)>0},t.prototype.showToast=function(e){this.toast.show(e)},i([b(cc.Node)],t.prototype,"plate",void 0),i([b(cc.Node)],t.prototype,"cubeParent",void 0),i([b(d.default)],t.prototype,"actionController",void 0),i([b(cc.Node)],t.prototype,"btn1",void 0),i([b(cc.Node)],t.prototype,"btn2",void 0),i([b(cc.Node)],t.prototype,"btn3",void 0),i([b(y.default)],t.prototype,"toast",void 0),i([b(cc.Node)],t.prototype,"GuoGai",void 0),i([v],t)}(cc.Component);o.default=S,cc._RF.pop()},{"../../GameManager":"GameManager","../../tool/GetHttp":"GetHttp","../../tool/HttpAgreement":"HttpAgreement","../CubeView/ChangeSpriteGray":"ChangeSpriteGray","../CubeView/CubeView":"CubeView","../StingWindow/SetingWindow":"SetingWindow","./ActionController":"ActionController","./CubePool":"CubePool","./GameSceneModel":"GameSceneModel","./GameSceneViewModel":"GameSceneViewModel","./ToastScrpit":"ToastScrpit"}],GetHttp:[function(e,t,o){"use strict";cc._RF.push(t,"fe8bbePFnBL75yg1o5+YlAV","GetHttp");var n=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,c=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(e,t,o,n);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(c=(i<3?r(c):i>3?r(t,o,c):r(t,o))||c);return i>3&&c&&Object.defineProperty(t,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var r=e("../GameManager"),i=cc._decorator,c=i.ccclass,a=(i.property,function(){function e(){}var t;return t=e,e.getHttp=function(e,o){void 0===o&&(o=null);var n=new XMLHttpRequest;return new Promise(function(r,i){n.onreadystatechange=function(){if(4==n.readyState&&n.status>=200&&n.status<400){var e=n.responseText;r(e)}},n.onerror=function(e){i(e)},t.lastRequestType=e;var c=t.getUrl(e,o);n.open("GET",c,!0),n.send()})},e.getUrl=function(e,o){return void 0===o&&(o=null),r.GameManager.Debug(""+t.baseUrl+e+"?userCode="+this.userCode+t.getParams(o)),""+t.baseUrl+e+"?userCode="+this.userCode+t.getParams(o)},e.getParams=function(e){if(null==e)return"";var t="";return Object.keys(e).forEach(function(o){t=""===t?"&"+o+"="+e[o]:"&"+t+"&"+o+"="+e[o]}),t},e.checkLastRequestType=function(e){return t.lastRequestType==e},e.baseUrl="http://121.40.230.20:8088/",e.userCode="",t=n([c],e)}());o.default=a,cc._RF.pop()},{"../GameManager":"GameManager"}],GridSheepItemScript:[function(e,t,o){"use strict";cc._RF.push(t,"4bb77jvJqlFNpd9uWQFEk4z","GridSheepItemScript");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,c=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(e,t,o,n);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(c=(i<3?r(c):i>3?r(t,o,c):r(t,o))||c);return i>3&&c&&Object.defineProperty(t,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var c=e("../../GameManager"),a=e("../GameScene/GameSceneEvent"),s=cc._decorator,l=s.ccclass,p=s.property,u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.icon=null,t.progress=null,t.selectImg=null,t.hpLabel=null,t}return r(t,e),t.prototype.onEnable=function(){this.node.on("touchend",this.onClick,this)},t.prototype.onDisable=function(){this.node.off("touchend",this.onClick,this)},t.prototype.InitItem=function(e,t,o,n,r,i){var a=this;this.sheepId=e;var s=c.GameManager.getSheepImg(r,i);cc.resources.load("Texture/sheep/"+s,cc.SpriteFrame,function(e,t){a.icon.spriteFrame=t}),this.progress.progress=o/n,this.hpLabel.string="HP:"+o+"/"+n},t.prototype.setSelectImgActive=function(e){null!=this.selectImg&&(this.selectImg.active=e)},t.prototype.removeClick=function(){this.node.off("touchend",this.onClick,this)},t.prototype.onClick=function(){this.node.dispatchEvent(new a.GameSceneEvent("clickSelectSheep",!0,this.sheepId))},i([p(cc.Sprite)],t.prototype,"icon",void 0),i([p(cc.ProgressBar)],t.prototype,"progress",void 0),i([p(cc.Node)],t.prototype,"selectImg",void 0),i([p(cc.Label)],t.prototype,"hpLabel",void 0),i([l],t)}(cc.Component);o.default=u,cc._RF.pop()},{"../../GameManager":"GameManager","../GameScene/GameSceneEvent":"GameSceneEvent"}],HttpAgreement:[function(e,t,o){"use strict";cc._RF.push(t,"b6685n2d1xJ05SwFv63tLlS","HttpAgreement");var n=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,c=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(e,t,o,n);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(c=(i<3?r(c):i>3?r(t,o,c):r(t,o))||c);return i>3&&c&&Object.defineProperty(t,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var r=cc._decorator,i=r.ccclass,c=(r.property,function(){function e(){}return e.getStruct="game/getStruct",e.moveToBox="game/moveToBox",e.startGame="game/startGame",e.shuffle="game/shuffle",e.movePoker="game/movePoker",e.revert="game/revert",e.quitGame="game/quitGame",e.getUserInfo="game/getUserInfo",e.joinTeam="game/joinTeam",e.selectSkin="game/selectSkin",e.getTopTeam="game/getTopTeam",n([i],e)}());o.default=c,cc._RF.pop()},{}],MenuSecnceView:[function(e,t,o){"use strict";cc._RF.push(t,"79663FRA9pPv5gTUMcITaOo","MenuSecnceView");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,c=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(e,t,o,n);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(c=(i<3?r(c):i>3?r(t,o,c):r(t,o))||c);return i>3&&c&&Object.defineProperty(t,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var c=e("../../GameManager"),a=e("../GameScene/GameSceneModel"),s=cc._decorator,l=s.ccclass,p=(s.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.CanvasNode=null,t.musicNodeScript=null,t.startClicked=!1,t}return r(t,e),t.prototype.onLoad=function(){this.CanvasNode=cc.find("Canvas"),this.musicNodeScript=cc.find("MusicNode").getComponent("MusicNode")},t.prototype.onEnable=function(){this.node.on("changeSelectSheep",this.onChangeSelectSheepEvent,this),this.node.on("goToSelectSheep",this.onGoToSelectSheepEvent,this),this.node.on("updateSelectSheep",this.onUpdateSelectSheepEvent,this),this.node.on("gamestart",this.ClickStart,this),this.startClicked=!1},t.prototype.onDisable=function(){this.node.off("changeSelectSheep",this.onChangeSelectSheepEvent,this),this.node.off("goToSelectSheep",this.onGoToSelectSheepEvent,this),this.node.off("updateSelectSheep",this.onUpdateSelectSheepEvent,this),this.node.off("gamestart",this.ClickStart,this)},t.prototype.onChangeSelectSheepEvent=function(){},t.prototype.onGoToSelectSheepEvent=function(){},t.prototype.onUpdateSelectSheepEvent=function(){},t.prototype.on_touch_ended=function(e){switch(this.musicNodeScript.playOnClick(),e.currentTarget._name){case"quanGuoBang":case"woZaiNaButton":case"faDanMubutton":case"huanZhuangButton":case"paiHangBangButton":break;case"mingPianButton":this.openMyBusinessCard();break;case"sheZhiButton":this.openSetingWindow();break;case"startButton":this.openStartGameWindow();break;case"SelectTypeButton":break;case"twitter":window.open(c.GameManager.twitterUrl);break;case"discord":window.open(c.GameManager.discordUrl);break;case"help":window.open(c.GameManager.helpUrl);break;case"paihangimg":window.open(c.GameManager.teamUrl)}},t.prototype.ClickStart=function(){var e=this;this.startClicked?c.GameManager.Debug("waiting2"):(this.startClicked=!0,a.gameSceneModel.startGame().then(function(){cc.director.loadScene("Main"),e.musicNodeScript.changeMusic("Main")}))},t.prototype.start=function(){},t.prototype.openMyBusinessCard=function(){var e=this;return new Promise(function(t,o){cc.resources.load("prefab/MyBusinessCardWindow",function(n,r){if(n)return cc.log("Prefab error:"+n),void o();if(!(r instanceof cc.Prefab))return cc.log("Prefab error"),void o();var i=cc.instantiate(r);e.CanvasNode.addChild(i),i.setPosition(0,0),t(null)})})},t.prototype.openSetingWindow=function(){var e=this;return new Promise(function(t,o){cc.resources.load("prefab/SetingWindow",function(n,r){if(n)return cc.log("Prefab error:"+n),void o();if(!(r instanceof cc.Prefab))return cc.log("Prefab error"),void o();var i=cc.instantiate(r);e.CanvasNode.addChild(i),i.setPosition(0,0),t(null)})})},t.prototype.openStartGameWindow=function(){var e=this;return new Promise(function(t,o){cc.resources.load("prefab/StartWindow",function(n,r){if(n)return cc.log("Prefab error:"+n),void o();if(!(r instanceof cc.Prefab))return cc.log("Prefab error"),void o();var i=cc.instantiate(r);e.node.addChild(i),i.setPosition(0,0),t(null)})})},i([l],t)}(cc.Component));o.default=p,cc._RF.pop()},{"../../GameManager":"GameManager","../GameScene/GameSceneModel":"GameSceneModel"}],MoveRound:[function(e,t,o){"use strict";cc._RF.push(t,"fd904iGzIdIy5mUk5VVay/c","MoveRound");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,c=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(e,t,o,n);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(c=(i<3?r(c):i>3?r(t,o,c):r(t,o))||c);return i>3&&c&&Object.defineProperty(t,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var c=e("../GameScene/GameSceneViewModel"),a=cc._decorator,s=a.ccclass,l=(a.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.totalAngle=720,t.minDistance=100,t.maxDistance=200,t.moveSpeed=2e3,t.roundSpeed=15,t.startShuffle=!1,t.moveToPointFinish=!1,t.moveRound=!1,t.curAngle=0,t.centerRotation=0,t.targetDistance=0,t}return r(t,e),Object.defineProperty(t.prototype,"shuffling",{get:function(){return this.startShuffle},enumerable:!1,configurable:!0}),t.prototype.onLoad=function(){this.centerPos=c.gameSceneViewModel.getCubePos(7,2,0,0)},t.prototype.start=function(){},t.prototype.onEnable=function(){this.startShuffle=!1},t.prototype.onDisable=function(){this.startShuffle=!1},t.prototype.shuffle=function(){this.curAngle=0,this.startPos=this.node.position,this.centerRotation=this.lookAtObject(this.centerPos.x,this.centerPos.y,this.node.x,this.node.y),this.moveToPointFinish=!1,this.moveRound=!1,this.startShuffle=!0},t.prototype.update=function(e){this.startShuffle&&(this.moveToPointFinish?this.moveRound&&(this.node.setPosition(this.rotateByPoint(this.node.position,this.centerPos,this.roundSpeed)),this.curAngle+=this.roundSpeed,this.curAngle>this.totalAngle&&(this.node.setPosition(this.startPos),this.moveRound=!1,this.startShuffle=!1)):this.moveToFunc(e))},t.prototype.lookAtObject=function(e,t,o,n){var r=o-e,i=n-t,c=cc.v2(r,i).signAngle(cc.v2(0,1))/Math.PI*180;return this.targetDistance=this.random(this.minDistance,this.maxDistance),c},t.prototype.moveToFunc=function(e){var t=this.getDistance(this.node.position,this.centerPos),o=this.targetDistance-t;if(Math.abs(o)<20)return this.moveToPointFinish=!0,this.moveRound=!0,void(this.curAngle=0);var n=2*this.centerRotation/360*Math.PI,r=cc.v2(Math.sin(n),Math.cos(n));r.normalizeSelf(),o>0?(this.node.x+=e*r.x*this.moveSpeed,this.node.y+=e*r.y*this.moveSpeed):(this.node.x-=e*r.x*this.moveSpeed,this.node.y-=e*r.y*this.moveSpeed)},t.prototype.getDistance=function(e,t){return Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2))},t.prototype.random=function(e,t){return Math.floor(Math.random()*(t-e+1)+e)},t.prototype.rotateByPoint=function(e,t,o,n){void 0===n&&(n=cc.Vec3.FORWARD);var r=new cc.Quat,i=new cc.Vec3,c=new cc.Vec3;cc.Vec3.subtract(i,e,t);var a=cc.misc.degreesToRadians(o);return cc.Quat.fromAxisAngle(r,n,a),cc.Vec3.transformQuat(c,i,r),cc.Vec3.add(c,t,c),i.normalizeSelf().mulSelf(2),cc.Vec3.add(c,i,c),c},i([s],t)}(cc.Component));o.default=l,cc._RF.pop()},{"../GameScene/GameSceneViewModel":"GameSceneViewModel"}],MusicNode:[function(e,t,o){"use strict";cc._RF.push(t,"06b3cSBYbZN9qRQ/k2bfqeR","MusicNode");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,c=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(e,t,o,n);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(c=(i<3?r(c):i>3?r(t,o,c):r(t,o))||c);return i>3&&c&&Object.defineProperty(t,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var c=e("./Moudel/SetingServerMoudel"),a=cc._decorator,s=a.ccclass,l=a.property,p=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.menuBGMCilp=null,t.gameBGMClip=null,t.clickClip=null,t.xiaoChuClip=null,t}return r(t,e),t.prototype.onLoad=function(){c.SetingMoudel.loadSetting(),cc.game.addPersistRootNode(this.node)},t.prototype.start=function(){c.SetingMoudel.yinYue&&(this.menuBGMID=cc.audioEngine.play(this.menuBGMCilp,!0,1))},t.prototype.playMusic=function(e){var t=cc.director.getScene();e&&c.SetingMoudel.yinYue?"Main"==t.name?this.gameBGMID=cc.audioEngine.play(this.gameBGMClip,!0,1):this.menuBGMID=cc.audioEngine.play(this.menuBGMCilp,!0,1):"Main"==t.name?cc.audioEngine.stop(this.gameBGMID):cc.audioEngine.stop(this.menuBGMID)},t.prototype.changeMusic=function(e){cc.audioEngine.stop(this.gameBGMID),cc.audioEngine.stop(this.menuBGMID),c.SetingMoudel.yinYue&&("Main"==e?this.gameBGMID=cc.audioEngine.play(this.gameBGMClip,!0,1):this.menuBGMID=cc.audioEngine.play(this.menuBGMCilp,!0,1))},t.prototype.playOnClick=function(){c.SetingMoudel.yinXiao&&cc.audioEngine.play(this.clickClip,!1,1)},t.prototype.playOnXiaoChu=function(){c.SetingMoudel.yinXiao&&cc.audioEngine.play(this.xiaoChuClip,!1,1)},i([l(cc.AudioClip)],t.prototype,"menuBGMCilp",void 0),i([l(cc.AudioClip)],t.prototype,"gameBGMClip",void 0),i([l(cc.AudioClip)],t.prototype,"clickClip",void 0),i([l(cc.AudioClip)],t.prototype,"xiaoChuClip",void 0),i([s],t)}(cc.Component);o.default=p,cc._RF.pop()},{"./Moudel/SetingServerMoudel":"SetingServerMoudel"}],MyBusinessCardWindow:[function(e,t,o){"use strict";cc._RF.push(t,"e3db15B+hBCpLk3mxxBFBJc","MyBusinessCardWindow");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,c=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(e,t,o,n);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(c=(i<3?r(c):i>3?r(t,o,c):r(t,o))||c);return i>3&&c&&Object.defineProperty(t,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var c=cc._decorator,a=c.ccclass,s=c.property,l=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.scaleNode=null,t}return r(t,e),t.prototype.onLoad=function(){this.node.on("touchend",this.on_touch_ended,this)},t.prototype.on_touch_ended=function(){var e=this;cc.tween(this.scaleNode).to(.25,{scaleX:0,scaleY:0}).call(function(){e.node.destroy()}).start()},t.prototype.start=function(){cc.tween(this.scaleNode).to(.25,{scaleX:1,scaleY:1}).start()},i([s(cc.Node)],t.prototype,"scaleNode",void 0),i([a],t)}(cc.Component);o.default=l,cc._RF.pop()},{}],NoItemWindow:[function(e,t,o){"use strict";cc._RF.push(t,"c3b7bJrKzdCBohaedPckowP","NoItemWindow");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,c=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(e,t,o,n);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(c=(i<3?r(c):i>3?r(t,o,c):r(t,o))||c);return i>3&&c&&Object.defineProperty(t,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var c=e("../../GameManager"),a=e("../GameScene/GameSceneEvent"),s=e("../GameScene/GameSceneModel"),l=cc._decorator,p=l.ccclass,u=l.property,d=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.label=null,t.scaleNode=null,t.Confirm_Label=null,t.clickOpenUrl=!1,t}return r(t,e),t.prototype.onEnable=function(){this.clickOpenUrl=!1,this.node.on("UseItemTips",this.SetWindowDetail,this),cc.game.on(cc.game.EVENT_SHOW,this.getUserInfo,this)},t.prototype.onDisable=function(){this.node.off("UseItemTips",this.SetWindowDetail,this),cc.game.off(cc.game.EVENT_SHOW,this.getUserInfo,this)},t.prototype.SetWindowDetail=function(e){switch(this.itemType=e,e){case s.ItemType.move:this.label.string="Available Removal Props: 0";break;case s.ItemType.back:this.label.string="Available Undo Props: 0";break;case s.ItemType.shuffle:this.label.string="Available Shuffle Props: 0"}this.IsTimesEnough=s.gameSceneModel.getItemTimes(e)>0,this.Confirm_Label.string=this.getBtnString()},t.prototype.ClickConFirm=function(){this.clickOpenUrl=!0,window.open(this.getURL())},t.prototype.start=function(){cc.tween(this.scaleNode).to(.25,{scaleX:1,scaleY:1}).start()},t.prototype.closeTween=function(){var e=this;cc.tween(this.scaleNode).to(.25,{scaleX:0,scaleY:0}).call(function(){e.node.destroy()}).start()},t.prototype.getURL=function(){return""},t.prototype.getBtnString=function(){return""},t.prototype.getUserInfo=function(){var e=this;c.GameManager.Debug("noItem-getinfo"),this.clickOpenUrl&&s.gameSceneModel.getUserInfo().then(function(){e.IsTimesEnough||s.gameSceneModel.getItemTimes(e.itemType)>0&&(e.node.dispatchEvent(new a.GameSceneEvent("updateItems",!0)),e.closeTween())})},i([u(cc.Label)],t.prototype,"label",void 0),i([u(cc.Node)],t.prototype,"scaleNode",void 0),i([u(cc.Label)],t.prototype,"Confirm_Label",void 0),i([p],t)}(cc.Component);o.default=d,cc._RF.pop()},{"../../GameManager":"GameManager","../GameScene/GameSceneEvent":"GameSceneEvent","../GameScene/GameSceneModel":"GameSceneModel"}],PreLoadView:[function(e,t,o){"use strict";cc._RF.push(t,"7a1774flvhNnJPeA7EzNT+q","PreLoadView");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,c=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(e,t,o,n);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(c=(i<3?r(c):i>3?r(t,o,c):r(t,o))||c);return i>3&&c&&Object.defineProperty(t,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var c=e("../../GameManager"),a=e("../../tool/GetHttp"),s=e("../GameScene/GameSceneModel"),l=cc._decorator,p=l.ccclass,u=l.property,d=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.loadingNode=null,t.progressBar=null,t.smile=null,t.isLoad=!1,t.getUsetInfoFinish=!1,t}return r(t,e),t.prototype.onLoad=function(){var e=window.location.href,t=new Object;if(-1!=e.indexOf("?"))for(var o=e.split("?")[1].split("&"),n=0;n<o.length;n++)t[o[n].split("=")[0]]=o[n].split("=")[1];null!=t.token?a.default.userCode=t.token:a.default.userCode=""+Math.floor(1e7*Math.random())},t.prototype.start=function(){var e=this;s.gameSceneModel.quitGame().then(function(){e.getUsetInfoFinish=!0});var t=this;t.progressBar.progress=0,cc.resources.loadDir("Texture/cubeImg",function(e,o){t.progressBar.progress=e/o,t.smile.x=t.progressBar.node.width*(e/o-.5)},function(){t.isLoad=!0,c.GameManager.Debug("load finish")})},t.prototype.update=function(){this.isLoad&&this.getUsetInfoFinish&&cc.director.loadScene("MenuScene")},i([u(cc.Node)],t.prototype,"loadingNode",void 0),i([u(cc.ProgressBar)],t.prototype,"progressBar",void 0),i([u(cc.Node)],t.prototype,"smile",void 0),i([p],t)}(cc.Component);o.default=d,cc._RF.pop()},{"../../GameManager":"GameManager","../../tool/GetHttp":"GetHttp","../GameScene/GameSceneModel":"GameSceneModel"}],SelectSheepInfoScrpit:[function(e,t,o){"use strict";cc._RF.push(t,"70c1d6ElQtNjrFS0w85y9AS","SelectSheepInfoScrpit");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,c=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(e,t,o,n);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(c=(i<3?r(c):i>3?r(t,o,c):r(t,o))||c);return i>3&&c&&Object.defineProperty(t,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var c=cc._decorator,a=c.ccclass,s=(c.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t.prototype.start=function(){},i([a],t)}(cc.Component));o.default=s,cc._RF.pop()},{}],SelectSheepWindow:[function(e,t){"use strict";cc._RF.push(t,"ea748RwFQNClpd/jnfpPn5Q","SelectSheepWindow"),cc._RF.pop()},{}],SetingServerMoudel:[function(e,t,o){"use strict";cc._RF.push(t,"ade85uIsRxGErA2ESa87r+h","SetingServerMoudel"),Object.defineProperty(o,"__esModule",{value:!0}),o.SetingMoudel=void 0;var n=function(){function e(){this._yinYue=!0,this._yinXiao=!0}return e.prototype.loadSetting=function(){null==cc.sys.localStorage.getItem("yinYue")?this.yinYue=!0:this._yinYue="true"==cc.sys.localStorage.getItem("yinYue"),null==cc.sys.localStorage.getItem("yinXiao")?this.yinXiao=!0:this._yinXiao="true"==cc.sys.localStorage.getItem("yinXiao")},Object.defineProperty(e.prototype,"yinYue",{get:function(){return this._yinYue},set:function(e){cc.sys.localStorage.setItem("yinYue",e),this._yinYue=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"yinXiao",{get:function(){return this._yinXiao},set:function(e){cc.sys.localStorage.setItem("yinXiao",e),this._yinXiao=e},enumerable:!1,configurable:!0}),e}();o.default=n,o.SetingMoudel=new n,cc._RF.pop()},{}],SetingWindow:[function(e,t,o){"use strict";cc._RF.push(t,"51394URJolI0rTUQKeIDTDS","SetingWindow");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,c=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(e,t,o,n);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(c=(i<3?r(c):i>3?r(t,o,c):r(t,o))||c);return i>3&&c&&Object.defineProperty(t,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var c=e("../../GameManager"),a=e("../../Moudel/SetingServerMoudel"),s=e("../GameScene/GameSceneModel"),l=cc._decorator,p=l.ccclass,u=l.property,d=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.scaleNode=null,t.yinYueButton=null,t.yinXiaoButton=null,t.giveUpBtn=null,t.musicNodeScript=null,t.yinYue_Label=null,t.yinXiao_Label=null,t.giveUp_Label=null,t}return r(t,e),t.prototype.onLoad=function(){this.yinYueButton.children[1].active=a.SetingMoudel.yinYue,this.yinXiaoButton.children[1].active=a.SetingMoudel.yinXiao,this.musicNodeScript=cc.find("MusicNode").getComponent("MusicNode"),this.loadLabel()},t.prototype.showGiveUp=function(){this.giveUpBtn.active=!0},t.prototype.start=function(){cc.tween(this.scaleNode).to(.25,{scaleX:1,scaleY:1}).start()},t.prototype.on_touch_Music=function(){a.SetingMoudel.yinYue=!a.SetingMoudel.yinYue,this.yinYueButton.children[1].active=a.SetingMoudel.yinYue,this.musicNodeScript.playOnClick(),this.musicNodeScript.playMusic(a.SetingMoudel.yinYue)},t.prototype.on_touch_SoundEffect=function(){a.SetingMoudel.yinXiao=!a.SetingMoudel.yinXiao,this.musicNodeScript.playOnClick(),this.yinXiaoButton.children[1].active=a.SetingMoudel.yinXiao},t.prototype.on_touch_GiveUp=function(){this.musicNodeScript.playOnClick(),this.closeTween(),s.gameSceneModel.quitGame(),cc.director.loadScene("MenuScene"),this.musicNodeScript.changeMusic("MenuScene")},t.prototype.on_touch_close=function(){this.musicNodeScript.playOnClick(),this.closeTween()},t.prototype.on_touch_twitter=function(){window.open(c.GameManager.teamUrl)},t.prototype.closeTween=function(){var e=this;cc.tween(this.scaleNode).to(.25,{scaleX:0,scaleY:0}).call(function(){e.node.destroy()}).start()},t.prototype.loadLabel=function(){this.yinXiao_Label.string=c.GameManager.getString(1004),this.yinYue_Label.string=c.GameManager.getString(1005),this.giveUp_Label.string=c.GameManager.getString(1008)},i([u(cc.Node)],t.prototype,"scaleNode",void 0),i([u(cc.Node)],t.prototype,"yinYueButton",void 0),i([u(cc.Node)],t.prototype,"yinXiaoButton",void 0),i([u(cc.Node)],t.prototype,"giveUpBtn",void 0),i([u(cc.Label)],t.prototype,"yinYue_Label",void 0),i([u(cc.Label)],t.prototype,"yinXiao_Label",void 0),i([u(cc.Label)],t.prototype,"giveUp_Label",void 0),i([p],t)}(cc.Component);o.default=d,cc._RF.pop()},{"../../GameManager":"GameManager","../../Moudel/SetingServerMoudel":"SetingServerMoudel","../GameScene/GameSceneModel":"GameSceneModel"}],SheepHPTipWindowScript:[function(e,t){"use strict";cc._RF.push(t,"b2f0c0TVMJEQKkJ7sUK6hJN","SheepHPTipWindowScript"),cc._RF.pop()},{}],ShowScore:[function(e,t,o){"use strict";cc._RF.push(t,"68852N8IbhOhJ6LQwvOXN/r","ShowScore");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,c=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(e,t,o,n);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(c=(i<3?r(c):i>3?r(t,o,c):r(t,o))||c);return i>3&&c&&Object.defineProperty(t,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var c=cc._decorator,a=c.ccclass,s=c.property,l=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.label=null,t}return r(t,e),t.prototype.onEnable=function(){this.node.on("addScore",this.onAddScoreEvent,this)},t.prototype.onDisable=function(){this.node.off("addScore",this.onAddScoreEvent,this)},t.prototype.onAddScoreEvent=function(e){var t=this;this.label.string="+"+e+"C",this.node.y=-50,cc.tween().target(this.node).to(.1,{y:0}).delay(.8).to(.2,{opacity:0}).call(function(){t.node.y=0,t.label.string="",t.node.opacity=255}).start()},i([s(cc.Label)],t.prototype,"label",void 0),i([a],t)}(cc.Component);o.default=l,cc._RF.pop()},{}],StartWindow:[function(e,t,o){"use strict";cc._RF.push(t,"982f1pnSKxBpbR2GqxJ0Yb4","StartWindow");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,c=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(e,t,o,n);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(c=(i<3?r(c):i>3?r(t,o,c):r(t,o))||c);return i>3&&c&&Object.defineProperty(t,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var c=e("../GameScene/GameSceneEvent"),a=cc._decorator,s=a.ccclass,l=a.property,p=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.label=null,t.scaleNode=null,t.formatDate=function(e){var t=new Date(e);return t.getFullYear(),(t.getMonth()+1<10?"0"+(t.getMonth()+1):t.getMonth()+1)+"\u6708"+(t.getDate()<10?"0"+t.getDate():t.getDate())+"\u65e5"},t}return r(t,e),t.prototype.StartGame=function(){this.closeTween(),this.node.dispatchEvent(new c.GameSceneEvent("gamestart",!0))},t.prototype.start=function(){cc.tween(this.scaleNode).to(.25,{scaleX:1,scaleY:1}).start(),this.label.string=""+this.formatDate((new Date).getTime())},t.prototype.closeTween=function(){var e=this;cc.tween(this.scaleNode).to(.25,{scaleX:0,scaleY:0}).call(function(){e.node.destroy()}).start()},i([l(cc.Label)],t.prototype,"label",void 0),i([l(cc.Node)],t.prototype,"scaleNode",void 0),i([s],t)}(cc.Component);o.default=p,cc._RF.pop()},{"../GameScene/GameSceneEvent":"GameSceneEvent"}],TeamItemScript:[function(e,t,o){"use strict";cc._RF.push(t,"6fdc6qlDxBAb4mjJ1lkLqv+","TeamItemScript");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,c=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(e,t,o,n);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(c=(i<3?r(c):i>3?r(t,o,c):r(t,o))||c);return i>3&&c&&Object.defineProperty(t,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var c=cc._decorator,a=c.ccclass,s=c.property,l=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.spine=null,t.label_num=null,t.label_name=null,t}return r(t,e),t.prototype.start=function(){for(var e=0;e<this.spine.childrenCount;e++){var t=this.spine.children[e].getComponent(sp.Skeleton);t.setSkin(this.Random(1,8).toString()),t.animation="wait"}},t.prototype.Random=function(e,t){return Math.floor(Math.random()*(t-e+1)+e)},i([s(cc.Node)],t.prototype,"spine",void 0),i([s(cc.Label)],t.prototype,"label_num",void 0),i([s(cc.Label)],t.prototype,"label_name",void 0),i([a],t)}(cc.Component);o.default=l,cc._RF.pop()},{}],ToastScrpit:[function(e,t,o){"use strict";cc._RF.push(t,"40987b6ZOROiLxTVL9D4N/i","ToastScrpit");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,c=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(e,t,o,n);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(c=(i<3?r(c):i>3?r(t,o,c):r(t,o))||c);return i>3&&c&&Object.defineProperty(t,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var c=cc._decorator,a=c.ccclass,s=c.property,l=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.label=null,t.isShow=!1,t}return r(t,e),t.prototype.show=function(e){var t=this;this.label.string=e,this.isShow||(this.isShow=!0,this.node.scale=1,cc.tween().target(this.node).delay(1).to(.1,{scale:0}).call(function(){t.isShow=!1}).start())},i([s(cc.Label)],t.prototype,"label",void 0),i([a],t)}(cc.Component);o.default=l,cc._RF.pop()},{}],UseItemWindowTips:[function(e,t,o){"use strict";cc._RF.push(t,"989bbwNGHlHCZvHN1RsaY8Y","UseItemWindowTips");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,c=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(e,t,o,n);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(c=(i<3?r(c):i>3?r(t,o,c):r(t,o))||c);return i>3&&c&&Object.defineProperty(t,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var c=e("../GameScene/GameSceneEvent"),a=e("../GameScene/GameSceneModel"),s=cc._decorator,l=s.ccclass,p=s.property,u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.ItemName=null,t.ItemDes=null,t.ItemdesImag=null,t.ButtonImg=null,t.ItemImg=null,t.scaleNode=null,t}return r(t,e),t.prototype.onEnable=function(){this.node.on("UseItemTips",this.SetWindowDetail,this)},t.prototype.onDisable=function(){this.node.off("UseItemTips",this.SetWindowDetail,this)},t.prototype.start=function(){cc.tween(this.scaleNode).to(.25,{scaleX:1,scaleY:1}).start()},t.prototype.SetWindowDetail=function(e){var t=this;switch(e){case a.ItemType.move:this._ItemType=1,cc.resources.load("Texture/EatFood/GetLife/6",cc.SpriteFrame,function(e,o){t.ItemImg.spriteFrame=o}),this.ItemName.string="Removal Prop",this.ItemDes.string="Remove 3 tiles and set aside.",cc.resources.load("Texture/EatFood/GetLife/des_6",cc.SpriteFrame,function(e,o){t.ItemdesImag.spriteFrame=o}),cc.resources.load("Texture/EatFood/GetLife/btn_6",cc.SpriteFrame,function(e,o){t.ButtonImg.spriteFrame=o});break;case a.ItemType.back:this._ItemType=2,cc.resources.load("Texture/EatFood/GetLife/2",cc.SpriteFrame,function(e,o){t.ItemImg.spriteFrame=o}),this.ItemName.string="Undo Prop",this.ItemDes.string="Undo last move and put it back.",cc.resources.load("Texture/EatFood/GetLife/des_2",cc.SpriteFrame,function(e,o){t.ItemdesImag.spriteFrame=o}),cc.resources.load("Texture/EatFood/GetLife/btn_2",cc.SpriteFrame,function(e,o){t.ButtonImg.spriteFrame=o});break;case a.ItemType.shuffle:this._ItemType=3,cc.resources.load("Texture/EatFood/GetLife/1",cc.SpriteFrame,function(e,o){t.ItemImg.spriteFrame=o}),this.ItemName.string="Shuffle Prop",this.ItemDes.string="Shuffle all unused tiles randomly.",cc.resources.load("Texture/EatFood/GetLife/des_1",cc.SpriteFrame,function(e,o){t.ItemdesImag.spriteFrame=o}),cc.resources.load("Texture/EatFood/GetLife/btn_1",cc.SpriteFrame,function(e,o){t.ButtonImg.spriteFrame=o})}},t.prototype.ClickClose=function(){this.closeTween()},t.prototype.ClickConFirm=function(){this.closeTween(),this.node.dispatchEvent(new c.GameSceneEvent("useItem",!0,this._ItemType))},t.prototype.closeTween=function(){var e=this;cc.tween(this.scaleNode).to(.25,{scaleX:0,scaleY:0}).call(function(){e.node.destroy()}).start()},i([p(cc.Label)],t.prototype,"ItemName",void 0),i([p(cc.Label)],t.prototype,"ItemDes",void 0),i([p(cc.Sprite)],t.prototype,"ItemdesImag",void 0),i([p(cc.Sprite)],t.prototype,"ButtonImg",void 0),i([p(cc.Sprite)],t.prototype,"ItemImg",void 0),i([p(cc.Node)],t.prototype,"scaleNode",void 0),i([l],t)}(cc.Component);o.default=u,cc._RF.pop()},{"../GameScene/GameSceneEvent":"GameSceneEvent","../GameScene/GameSceneModel":"GameSceneModel"}]},{},["GameManager","SetingServerMoudel","MusicNode","ClickPlayAudio","ChangeSpriteGray","CubeView","MoveRound","ShowScore","FailedWindow","FinishWindow","ActionController","CubePool","GameScene","GameSceneEvent","GameSceneModel","GameSceneViewModel","ToastScrpit","MenuSecnceView","PreLoadView","SelectSheepInfoScrpit","SheepHPTipWindowScript","StartWindow","TeamItemScript","MyBusinessCardWindow","GridSheepItemScript","SelectSheepWindow","SetingWindow","NoItemWindow","UseItemWindowTips","GetHttp","HttpAgreement"]);